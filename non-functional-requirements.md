# 工場設備稼働監視システム 非機能要件書

## 1. 可用性

### 1.1 稼働率要件
- **目標稼働率**: 99.9%（年間ダウンタイム8.76時間以内）
- **稼働時間**: 24時間365日連続稼働
- **計画停止**: 月次メンテナンス時間を含めて月間99.5%以上

### 1.2 システム冗長化
- **アプリケーションサーバー**: 最低2台構成での冗長化
- **データベース**: マスタースレーブ構成によるレプリケーション
- **ネットワーク**: 複数回線による冗長構成
- **データセンター**: マルチアベイラビリティゾーン配置

### 1.3 障害対応
- **自動復旧**: システム障害の自動検知と復旧機能
- **フェイルオーバー**: 主系障害時の副系への自動切り替え（30秒以内）
- **データバックアップ**: 
  - 課金情報・予約情報の24時間365日復旧可能な体制
  - RPO（目標復旧時点）: 1時間以内
  - RTO（目標復旧時間）: 4時間以内

### 1.4 保守・運用体制
- **24時間監視**: システム稼働状況の常時監視
- **緊急対応**: 重大障害時の1時間以内対応開始
- **定期保守**: 月次での予防保守実施

## 2. 性能・拡張性

### 2.1 性能要件

#### 2.1.1 同時ユーザー数
- **最大同時接続数**: 10名（ヒアリング要件）
- **ピーク時想定**: 15名（30%のマージン）
- **レスポンス時間**: 通常操作で3秒以内、重い処理で10秒以内

#### 2.1.2 データ処理性能
- **センサーデータ処理**: 毎秒10,000件のデータポイント処理
- **リアルタイム表示**: 1秒間隔でのダッシュボード更新
- **データ検索**: 過去1年分データの検索を5秒以内

#### 2.1.3 ストレージ性能
- **データ蓄積容量**: 年間10TB（5年間保存）
- **データベースI/O**: 1,000 IOPS以上
- **バックアップ処理**: 日次フルバックアップを4時間以内で完了

### 2.2 拡張性要件

#### 2.2.1 水平スケーリング
- **アプリケーション層**: ロードバランサーによる負荷分散対応
- **データベース層**: 読み取り専用レプリカの追加可能
- **ストレージ層**: 容量増加に応じたストレージ拡張

#### 2.2.2 機能拡張性
- **新機能追加**: 既存機能に影響を与えない設計
- **API拡張**: RESTful APIによる外部システム連携拡張
- **プラグイン機能**: サードパーティ製センサーの追加対応

#### 2.2.3 地理的拡張
- **マルチリージョン対応**: 複数工場への展開可能な設計
- **データレプリケーション**: リージョン間でのデータ同期

### 2.3 容量計画
- **CPU使用率**: 平均50%以下、ピーク時80%以下
- **メモリ使用率**: 平均60%以下、ピーク時85%以下
- **ネットワーク帯域**: 100Mbps（通常時）、1Gbps（ピーク時）

## 3. 運用・保守性

### 3.1 監視・ログ管理

#### 3.1.1 システム監視
- **インフラ監視**: CPU、メモリ、ディスク、ネットワークの監視
- **アプリケーション監視**: レスポンス時間、エラー率、スループット
- **ビジネス監視**: 設備稼働率、アラート発生頻度、ユーザー利用状況

#### 3.1.2 ログ管理
- **ログ種別**: アクセスログ、エラーログ、監査ログ、業務ログ
- **ログ保存期間**: 3年間（法的要件対応）
- **ログ検索**: 全文検索とフィルタリング機能

#### 3.1.3 アラート機能
- **重要度別通知**: Critical、High、Medium、Lowの4段階
- **通知手段**: メール、SMS、アプリ内通知、音声アラート
- **エスカレーション**: 未対応時の段階的通知

### 3.2 デプロイメント・更新

#### 3.2.1 デプロイ方式
- **ブルーグリーンデプロイ**: 無停止でのシステム更新
- **カナリアリリース**: 段階的なアップデート展開
- **ロールバック**: 問題発生時の即座の前バージョン復帰

#### 3.2.2 構成管理
- **Infrastructure as Code**: Terraformによるインフラ管理
- **設定管理**: 環境別設定の外部化
- **バージョン管理**: Git によるソースコード管理

### 3.3 運用自動化
- **自動バックアップ**: 日次、週次、月次バックアップの自動実行
- **ヘルスチェック**: 定期的なシステム正常性確認
- **自動復旧**: 軽微な障害の自動回復機能

### 3.4 運用手順書
- **障害対応手順**: 障害種別ごとの対応フロー
- **定期保守手順**: メンテナンス作業の標準化
- **緊急時対応**: 災害時・重大障害時の対応プロセス

## 4. 移行性

### 4.1 システム移行

#### 4.1.1 データ移行
- **現行システム**: 新規開発のため移行対象なし
- **データ形式**: 標準的なCSV、JSON形式でのデータ入出力対応
- **移行ツール**: データインポート・エクスポート機能の提供

#### 4.1.2 段階的移行
- **パイロット運用**: 小規模での先行導入（1ヶ月）
- **段階展開**: 工場エリア別の順次展開
- **並行運用**: 必要に応じた旧システムとの並行稼働

### 4.2 互換性・移植性

#### 4.2.1 プラットフォーム互換性
- **クラウドプラットフォーム**: Azure中心設計、他クラウドへの移植可能性考慮
- **データベース**: 標準SQLベースの設計
- **コンテナ化**: Docker/Kubernetesによる環境非依存

#### 4.2.2 データ標準化
- **データフォーマット**: 業界標準規格（OPC UA等）への準拠
- **API標準**: RESTful API設計原則の遵守
- **メタデータ**: データ構造の文書化と標準化

### 4.3 将来拡張対応
- **アーキテクチャ**: マイクロサービス設計による柔軟性確保
- **インターフェース**: 標準的なAPIによる外部システム連携
- **技術選択**: 枯れた技術と新技術のバランス

## 5. セキュリティ

### 5.1 個人情報・機密情報保護

#### 5.1.1 データ分類・保護
- **個人情報**: 作業者情報、ユーザーアカウント情報の厳格な管理
- **機密情報**: 生産データ、設備情報、課金情報の暗号化保存
- **アクセス制御**: 最小権限原則による情報アクセス制限

#### 5.1.2 暗号化
- **データ暗号化**: 
  - 保存時: AES-256による暗号化
  - 転送時: TLS 1.3による通信暗号化
- **キー管理**: Azure Key Vaultによる暗号化キー管理

### 5.2 認証・認可

#### 5.2.1 ユーザー認証
- **多要素認証**: パスワード + SMS/トークンによる2段階認証
- **シングルサインオン**: Azure Active Directoryとの統合
- **アカウント管理**: 定期的なパスワード変更、アカウント棚卸し

#### 5.2.2 アクセス制御
- **役割ベースアクセス制御（RBAC）**: 職務に応じた権限設定
- **APIアクセス制御**: JWT トークンによるAPI認証
- **IP制限**: 工場内IPアドレスからのみアクセス許可

### 5.3 セキュリティ監視・対策

#### 5.3.1 セキュリティ監視
- **不正アクセス検知**: ログ分析による異常アクセスの検出
- **脆弱性スキャン**: 定期的なセキュリティ診断実施
- **侵入検知**: WAF（Web Application Firewall）による防御

#### 5.3.2 インシデント対応
- **緊急対応体制**: セキュリティインシデント発生時の対応フロー
- **証跡保全**: 調査に必要なログの確実な保存
- **報告体制**: 法的要件に基づく報告プロセス

### 5.4 コンプライアンス
- **個人情報保護法**: 個人情報の適切な取扱い
- **GDPR対応**: EU圏での利用時の準拠
- **ISO 27001**: 情報セキュリティマネジメント体系への準拠

## 6. 環境・サステナビリティ

### 6.1 省エネルギー・環境配慮

#### 6.1.1 消費電力最適化
- **クラウドリソース最適化**: 使用量に応じたオートスケーリング
- **太陽光発電活用**: データセンターでの再生可能エネルギー利用
- **省電力設計**: 不要なリソースの自動停止機能

#### 6.1.2 カーボンフットプリント削減
- **グリーンデータセンター**: 環境認証取得施設の利用
- **効率的な処理**: アルゴリズム最適化による計算リソース削減
- **ペーパーレス**: デジタルレポートによる紙使用量削減

### 6.2 持続可能な運用

#### 6.2.1 リソース効率化
- **仮想化技術**: コンテナ化による高密度化
- **負荷分散**: 効率的なリソース利用による無駄削減
- **ライフサイクル管理**: 計画的なハードウェア更新

#### 6.2.2 循環型ITモデル
- **機器リサイクル**: 更新機器の適切な処分・再利用
- **長寿命設計**: 保守性を重視した持続可能なシステム設計
- **標準化**: 汎用的な技術採用による機器の相互利用

### 6.3 環境影響評価
- **環境負荷測定**: システム運用による環境負荷の定量化
- **改善目標**: 年次での環境負荷削減目標設定
- **報告**: 環境負荷に関する定期報告とステークホルダーへの開示

### 6.4 モバイルアプリケーション環境配慮
- **軽量設計**: バッテリー消費を抑えたアプリ設計
- **通信最適化**: データ通信量削減による環境負荷軽減
- **デバイス長寿命**: 幅広いデバイス対応による買い替え抑制

## 7. 追加考慮事項

### 7.1 国際化・地域化
- **多言語対応**: 日本語・英語での画面表示
- **時差対応**: マルチタイムゾーン運用への配慮
- **地域規制**: 各国の法規制への対応準備

### 7.2 ユーザビリティ
- **直感的操作**: 専門知識がなくても操作可能な画面設計
- **アクセシビリティ**: 障害者配慮のユニバーサルデザイン
- **モバイル最適化**: スマートフォンでの快適な操作性

### 7.3 事業継続性
- **災害対策**: 自然災害時のシステム継続運用
- **代替手段**: システム障害時の業務継続方法
- **バックアップサイト**: 主データセンター障害時の代替運用