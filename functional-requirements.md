# 工場設備稼働監視システム 機能要件書

## 1. アプリケーション開発の目的や背景

### 1.1 開発目的
工場設備の稼働監視における課題を解決し、生産性向上とコスト削減を実現するためのソフトウェアソリューションを開発する。

### 1.2 背景
- **監視対象の多さ**: 多数の生産設備を同時に監視する必要があり、監視対象が多岐にわたる
- **人手不足とスキル不足**: 専門知識を持ったスタッフが不足し、監視対応が限られる
- **データ分析の困難さ**: 適切なセンサーや測定装置の導入が必要で、データの統合・分析が困難

### 1.3 期待される効果
- 設備異常の早期発見による生産停止時間の削減
- 予知保全による突発的な故障コストの削減
- データ駆動型の意思決定による生産効率の向上
- 専門スタッフの業務効率化と作業負荷軽減

## 2. 対象ユーザーや利用シーン

### 2.1 主要ユーザー

#### 2.1.1 工場オペレーター
- **役割**: 日常的な設備監視とアラート対応
- **利用シーン**: 
  - 24時間体制での監視ダッシュボード確認
  - 異常アラート発生時の即座の対応
  - 設備状態の定期確認とレポート作成

#### 2.1.2 保守エンジニア
- **役割**: 設備の予防保全と故障対応
- **利用シーン**:
  - 予知保全スケジュールの確認と計画立案
  - 故障予測データの分析
  - 保全作業履歴の記録と管理

#### 2.1.3 生産管理者
- **役割**: 生産計画の策定と効率最適化
- **利用シーン**:
  - 生産効率データの分析と改善施策の検討
  - 設備稼働率の監視と生産計画の調整
  - 経営層への定期レポート作成

### 2.2 副次ユーザー
- **工場管理者**: 全体的な工場運営の意思決定
- **調達担当者**: 保全部品の調達計画
- **品質管理者**: 製品品質と設備状態の相関分析

### 2.3 利用環境
- **場所**: 工場内制御室、現場、事務所、外出先
- **デバイス**: デスクトップPC、タブレット、スマートフォン
- **ネットワーク**: 社内LAN、Wi-Fi、モバイル回線

## 3. 主要な機能やサービス

### 3.1 リアルタイム監視機能
- **設備状態監視**: 全設備の稼働状況をリアルタイム表示
- **異常検知**: AIによる異常パターンの自動検知
- **アラート通知**: 重要度に応じた段階的アラート
- **ダッシュボード**: カスタマイズ可能な監視画面

### 3.2 予知保全機能
- **故障予測**: 機械学習による故障リスク算出
- **保全計画**: 最適な保全スケジュールの自動生成
- **部品管理**: 保全部品の在庫状況と調達タイミング
- **作業履歴**: 保全作業の記録と効果測定

### 3.3 生産効率最適化機能
- **効率分析**: 生産効率のリアルタイム分析
- **ボトルネック特定**: 生産阻害要因の自動検出
- **最適化提案**: AIによる改善提案の生成
- **効果測定**: 改善施策の効果追跡

### 3.4 データ管理・分析機能
- **データ収集**: 多様なセンサーデータの統合
- **データ蓄積**: 長期間のトレンドデータ保存
- **レポート生成**: 各種レポートの自動生成
- **データエクスポート**: 外部システム連携用データ出力

## 4. 画面や操作

### 4.1 メイン画面構成

#### 4.1.1 監視ダッシュボード
- **画面要素**:
  - 工場レイアウト図（設備配置と状態表示）
  - リアルタイム稼働率表示
  - アラート一覧
  - 重要KPIサマリー
- **操作**:
  - 設備詳細画面への遷移（クリック/タップ）
  - 時間軸の変更（スライダー操作）
  - 表示項目のカスタマイズ（ドラッグ&ドロップ）

#### 4.1.2 設備詳細画面
- **画面要素**:
  - 設備情報（型番、設置日、仕様等）
  - センサーデータ（温度、振動、電流等）
  - 稼働履歴グラフ
  - 保全履歴一覧
- **操作**:
  - 期間選択（カレンダー入力）
  - データダウンロード（ボタンクリック）
  - 保全計画画面への遷移

#### 4.1.3 予知保全画面
- **画面要素**:
  - 故障リスクランキング
  - 推奨保全スケジュール
  - 部品在庫状況
  - 保全作業進捗
- **操作**:
  - 保全計画の承認/却下
  - スケジュール調整（ドラッグ&ドロップ）
  - 作業完了報告（フォーム入力）

### 4.2 モバイル対応
- **レスポンシブデザイン**: 画面サイズに応じた最適表示
- **タッチ操作**: スワイプ、ピンチズーム対応
- **通知機能**: プッシュ通知によるアラート配信

### 4.3 アクセシビリティ
- **多言語対応**: 日本語、英語
- **色覚サポート**: カラーユニバーサルデザイン
- **音声案内**: 重要アラートの音声通知

## 5. 外部サービスとのやり取り

### 5.1 IoTセンサー連携
- **通信プロトコル**: MQTT、HTTP/HTTPS
- **データ形式**: JSON、CSV
- **連携頻度**: リアルタイム（秒単位）
- **対象データ**:
  - 温度、湿度、圧力
  - 振動、音響
  - 電流、電圧、電力
  - 回転数、流量

### 5.2 ERP（企業資源計画）システム連携
- **連携方式**: REST API、ファイル連携
- **データ交換**:
  - 生産計画データの受信
  - 設備稼働実績の送信
  - 保全コスト情報の送信
- **連携頻度**: 日次バッチ処理

### 5.3 部品調達システム連携
- **連携内容**:
  - 保全部品在庫情報の受信
  - 部品発注情報の送信
  - 納期情報の受信
- **通信方式**: EDI、API連携

### 5.4 メール・SMS通知サービス
- **通知条件**:
  - 緊急アラート発生時
  - 保全期限通知
  - システム障害通知
- **配信先**: 担当者、管理者、緊急連絡先

### 5.5 クラウドサービス連携
- **Azure IoT Hub**: センサーデータ収集
- **Azure Machine Learning**: AI予測モデル
- **Azure Storage**: データバックアップ
- **Azure Active Directory**: 認証・認可

## 6. 他のアプリケーションやサービスとの依存関係

### 6.1 必須依存関係

#### 6.1.1 データベースシステム
- **Azure SQL Database**: メインデータベース
- **Azure Data Lake**: 大容量データストレージ
- **Redis**: キャッシュとセッション管理
- **依存理由**: データの永続化と高速アクセス

#### 6.1.2 認証・認可システム
- **Azure Active Directory**: ユーザー認証
- **OAuth 2.0 + JWT**: APIアクセス制御
- **依存理由**: セキュアなアクセス制御

#### 6.1.3 メッセージングシステム
- **Apache Kafka**: リアルタイムデータストリーミング
- **MQTT Broker**: IoTデバイス通信
- **依存理由**: 大量データの高速処理

### 6.2 オプション依存関係

#### 6.2.1 BI（ビジネスインテリジェンス）ツール
- **Power BI**: 高度な分析とレポート
- **Tableau**: データ可視化
- **依存理由**: より詳細な分析機能の提供

#### 6.2.2 CMMS（設備管理システム）
- **既存の保全管理システム**: 保全履歴の統合
- **依存理由**: 既存業務フローとの整合性

#### 6.2.3 在庫管理システム
- **部品在庫システム**: 保全部品の在庫連携
- **依存理由**: 効率的な部品調達

### 6.3 インフラ依存関係

#### 6.3.1 コンテナオーケストレーション
- **Azure Kubernetes Service (AKS)**: アプリケーション実行基盤
- **Docker**: コンテナ化
- **依存理由**: スケーラブルなシステム運用

#### 6.3.2 CI/CDパイプライン
- **Azure DevOps**: 継続的インテグレーション/デプロイ
- **GitHub Actions**: ソースコード管理と自動化
- **依存理由**: 安定的なシステム更新

#### 6.3.3 監視・ログ管理
- **Azure Monitor**: システム監視
- **Grafana**: メトリクス可視化
- **ELK Stack**: ログ分析
- **依存理由**: システムの健全性監視

### 6.4 依存関係管理方針
- **バージョン管理**: 各依存サービスのバージョン固定化
- **冗長化**: 重要な依存関係の冗長構成
- **代替手段**: 依存サービス障害時の代替機能
- **監視**: 依存サービスの稼働状況監視